# ğŸ¨ Visual System Flow - Authentik QR Order Management

## Complete Workflow Visualization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AUTHENTIK QR ORDER MANAGEMENT SYSTEM                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 1: CREATE   â”‚
â”‚   Creator Role    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ Creates QR Order Request
          â”‚ - Product: Brand X Shampoo
          â”‚ - Quantity: 3000 units
          â”‚ - Batch, Dates, etc.
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status: PENDING AUTH â³   â”‚ â—„â”€â”€â”€ QRs NOT YET GENERATED
â”‚   Color: Yellow             â”‚      Email sent to all
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Authorizer Reviews
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 2: AUTHORIZE          â”‚
â”‚  Authorizer/Company Role    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Clicks "Authorize"
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Status: AUTHORIZED âœ…     â”‚ â—„â”€â”€â”€ QRs STILL NOT GENERATED
â”‚   Color: Purple             â”‚      Email sent to all
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Super Admin Reviews
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 3: PROCESS            â”‚
â”‚  Super Admin Role           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Clicks "Process & Generate QRs"
               â”‚ System generates 3000 QR codes
               â”‚ Stored in DB with isActive: FALSE
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: ORDER PROCESSING âš™ï¸â”‚ â—„â”€â”€â”€ QRs GENERATED BUT INACTIVE ğŸ”’
â”‚  Color: Blue                â”‚      Email sent: "3000 QRs created"
â”‚  QRs Generated: TRUE        â”‚
â”‚  QRs Active: FALSE          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Super Admin Prepares
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 4: DISPATCHING        â”‚
â”‚  Super Admin Role           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Clicks "Prepare Dispatch"
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: DISPATCHING ğŸ“¦     â”‚ â—„â”€â”€â”€ QRs STILL INACTIVE ğŸ”’
â”‚  Color: Orange              â”‚      Email sent
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Super Admin Enters Courier Info
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 5: DISPATCH           â”‚
â”‚  Super Admin Role           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Enters:
               â”‚ - Courier: FedEx
               â”‚ - Tracking: FDX123456789
               â”‚ - Notes
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: DISPATCHED ğŸšš      â”‚ â—„â”€â”€â”€ QRs STILL INACTIVE ğŸ”’
â”‚  Color: Amber               â”‚      Physical QRs shipped to factory
â”‚  Tracking: FDX123456789     â”‚      Email with tracking sent
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Package arrives at factory
               â”‚ Authorizer verifies
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  STEP 6: RECEIVED (FINAL)   â”‚
â”‚  Authorizer Role            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ Clicks "Mark Received"
               â”‚ Confirms dialog
               â”‚
               â”‚ ğŸ”¥ MAGIC HAPPENS HERE ğŸ”¥
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: RECEIVED ğŸ‰                    â”‚ â—„â”€â”€â”€ QRs NOW ACTIVE âœ…âœ…âœ…
â”‚  Color: Green                           â”‚      
â”‚  QRs Active: TRUE (ALL 3000 QRs)        â”‚      Email: "QRs ACTIVATED!"
â”‚                                         â”‚
â”‚  Database Update:                       â”‚
â”‚  UPDATE products                        â”‚
â”‚  SET isActive = true                    â”‚
â”‚  WHERE orderId = ORDER_ID               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Status Color Scheme

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Pending Authorization    â³  YELLOW    â”‚
â”‚  Authorized               âœ…  PURPLE    â”‚
â”‚  Order Processing         âš™ï¸  BLUE      â”‚
â”‚  Dispatching             ğŸ“¦  ORANGE    â”‚
â”‚  Dispatched              ğŸšš  AMBER     â”‚
â”‚  Received                ğŸ‰  GREEN     â”‚
â”‚  Rejected                âŒ  RED       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Role Access Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Action          â”‚ Creator â”‚ Authorizer â”‚ Super Admin  â”‚ Company â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Create Order     â”‚   âœ…    â”‚     âŒ     â”‚      âŒ      â”‚   âœ…    â”‚
â”‚ Authorize        â”‚   âŒ    â”‚     âœ…     â”‚      âŒ      â”‚   âœ…    â”‚
â”‚ Process (Gen QR) â”‚   âŒ    â”‚     âŒ     â”‚      âœ…      â”‚   âŒ    â”‚
â”‚ Dispatching      â”‚   âŒ    â”‚     âŒ     â”‚      âœ…      â”‚   âŒ    â”‚
â”‚ Dispatch         â”‚   âŒ    â”‚     âŒ     â”‚      âœ…      â”‚   âŒ    â”‚
â”‚ Mark Received    â”‚   âŒ    â”‚     âœ…     â”‚      âŒ      â”‚   âœ…    â”‚
â”‚ Download PDF     â”‚   âŒ    â”‚     âœ…     â”‚      âœ…      â”‚   âœ…    â”‚
â”‚ View Own Orders  â”‚   âœ…    â”‚     âœ…     â”‚      âŒ      â”‚   âœ…    â”‚
â”‚ View All Orders  â”‚   âŒ    â”‚     âŒ     â”‚      âœ…      â”‚   âŒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Email Notification Flow

```
                    Every Status Change
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Get All Notification Recipients    â”‚
        â”‚   - Creator                          â”‚
        â”‚   - All Authorizers (for company)    â”‚
        â”‚   - Company Admin                    â”‚
        â”‚   - All Super Admins                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Build Beautiful HTML Email         â”‚
        â”‚   - Order ID & Details               â”‚
        â”‚   - Status Badge (colored)           â”‚
        â”‚   - Action Description               â”‚
        â”‚   - Next Steps                       â”‚
        â”‚   - Link to Dashboard                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Send via Nodemailer (SMTP)         â”‚
        â”‚   Gmail App Password                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   All Stakeholders Receive Email     â”‚
        â”‚   ğŸ“§ â†’ Inbox                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Users                              â”‚
â”‚  _id, email, role, name, companyId, brandId                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ (references)
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                                   â”‚
         â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Orders        â”‚            â”‚   Products (QRs)    â”‚
â”‚                    â”‚            â”‚                     â”‚
â”‚ _id                â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ orderId (ref)       â”‚
â”‚ orderId            â”‚            â”‚ qrCode              â”‚
â”‚ productName        â”‚            â”‚ productName         â”‚
â”‚ brand              â”‚            â”‚ brand               â”‚
â”‚ quantity           â”‚            â”‚ batchNo             â”‚
â”‚ status             â”‚            â”‚ isActive ğŸ”’         â”‚
â”‚ createdBy (ref)    â”‚            â”‚ sequence            â”‚
â”‚ company (ref)      â”‚            â”‚ createdBy (ref)     â”‚
â”‚ qrCodesGenerated   â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ qrGeneratedCount   â”‚
â”‚ dispatchDetails    â”‚
â”‚ history []         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status Flow:
Pending â†’ Authorized â†’ Processing â†’ Dispatching â†’ Dispatched â†’ Received
   â³        âœ…           âš™ï¸           ğŸ“¦           ğŸšš          ğŸ‰
(inactive)                      (inactive)                 (ACTIVE!)
```

---

## QR Code Activation Logic

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Order Created (Step 1)                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  QRs: NOT GENERATED                                          â”‚
â”‚  Status: Pending Authorization                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Authorized (Step 2)                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  QRs: STILL NOT GENERATED                                    â”‚
â”‚  Status: Authorized                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Processed (Step 3) - GENERATION HAPPENS                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  FOR i = 1 TO quantity:                                      â”‚
â”‚    CREATE Product {                                          â”‚
â”‚      qrCode: "BrandX-000001-ORD-XXX-ABCD"                    â”‚
â”‚      productName: "...",                                     â”‚
â”‚      brand: "Brand X",                                       â”‚
â”‚      orderId: ORDER_ID,                                      â”‚
â”‚      isActive: FALSE  ğŸ”’ğŸ”’ğŸ”’                                  â”‚
â”‚    }                                                         â”‚
â”‚  Status: Order Processing                                    â”‚
â”‚  qrCodesGenerated: TRUE                                      â”‚
â”‚  qrGeneratedCount: quantity                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Dispatched (Step 5)                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  QRs: STILL INACTIVE ğŸ”’                                      â”‚
â”‚  Physical QRs shipped to factory                             â”‚
â”‚  Status: Dispatched                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  When Marked Received (Step 6) - ACTIVATION HAPPENS ğŸ”¥       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
â”‚  UPDATE products                                             â”‚
â”‚  SET isActive = TRUE  âœ…âœ…âœ…                                  â”‚
â”‚  WHERE orderId = ORDER_ID                                    â”‚
â”‚                                                              â”‚
â”‚  Result: ALL 3000 QRs NOW ACTIVE!                            â”‚
â”‚  Status: Received                                            â”‚
â”‚  Emails sent: "Order complete, QRs activated!"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## User Journey Diagrams

### Creator Journey
```
Login â†’ Dashboard â†’ Order Management â†’ Create New Order
                                             â†“
                    Fill Form (Product, Brand, Qty, Dates)
                                             â†“
                                  Submit & Get Email âœ‰ï¸
                                             â†“
                              Wait for Authorizer & Admin
                                             â†“
                           Receive Email Updates at Each Step
                                             â†“
                               Final Email: QRs Activated! ğŸ‰
```

### Authorizer Journey
```
Login â†’ Dashboard â†’ Order Management â†’ See "Pending Authorization"
                                             â†“
                                  Review Order Details
                                             â†“
                                Click "âœ“ Authorize" Button
                                             â†“
                            Email Sent: "Order Authorized" âœ‰ï¸
                                             â†“
                        Wait for Super Admin to Process & Dispatch
                                             â†“
                           Receive Email: "Order Dispatched" ğŸšš
                                             â†“
                       Physical Package Arrives at Factory ğŸ“¦
                                             â†“
                         Click "âœ“ Mark Received" Button
                                             â†“
                           Confirm Dialog: "Activate QRs?"
                                             â†“
                            ğŸ‰ ALL QRs ACTIVATED! âœ…
                                             â†“
                           Email Sent to Everyone: "Complete!"
```

### Super Admin Journey
```
Login â†’ Dashboard â†’ Order Management â†’ See "Authorized" Orders
                                             â†“
                          Click "âš™ï¸ Process & Generate QRs"
                                             â†“
                        System Generates QRs (may take time)
                                             â†“
                           Email Sent: "QRs Generated" âœ‰ï¸
                                             â†“
                         Click "ğŸ“¦ Prepare Dispatch"
                                             â†“
                             Click "ğŸšš Dispatch"
                                             â†“
                   Enter Courier Name, Tracking, Notes
                                             â†“
                                         Submit
                                             â†“
                         Email Sent: "Order Dispatched" âœ‰ï¸
                                             â†“
                          Wait for Authorizer Confirmation
                                             â†“
                       Receive Email: "Order Received & QRs Active!"
```

---

## Data Flow Diagram

```
Frontend (React)
     â”‚
     â”‚ API Calls (axios/fetch)
     â”‚ Authorization: Bearer TOKEN
     â”‚
     â–¼
Backend (Express/Node)
     â”‚
     â”œâ”€â–º Middleware: Auth Check
     â”‚   (protect, authorize)
     â”‚
     â”œâ”€â–º Route Handler
     â”‚   (order.routes.js)
     â”‚   â”‚
     â”‚   â”œâ”€â–º MongoDB
     â”‚   â”‚   â”œâ”€ Orders Collection
     â”‚   â”‚   â”œâ”€ Products Collection
     â”‚   â”‚   â””â”€ Users Collection
     â”‚   â”‚
     â”‚   â”œâ”€â–º Email Service
     â”‚   â”‚   (nodemailer)
     â”‚   â”‚   â”‚
     â”‚   â”‚   â””â”€â–º Gmail SMTP
     â”‚   â”‚       â””â”€â–º Stakeholder Inboxes ğŸ“§
     â”‚   â”‚
     â”‚   â””â”€â–º PDF Generator
     â”‚       (pdfkit + qrcode)
     â”‚       â””â”€â–º Base64 PDF to Frontend
     â”‚
     â””â”€â–º Response (JSON)
         â””â”€â–º Frontend Updates UI
```

---

## File Structure Tree

```
authentik/
â”‚
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ Order.js          âœ… UPDATED
â”‚   â”‚   â”‚   â”œâ”€â”€ Product.js        âœ… UPDATED
â”‚   â”‚   â”‚   â””â”€â”€ User.js
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ order.routes.js   âœ… REPLACED
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”œâ”€â”€ emailService.js   âœ… NEW
â”‚   â”‚   â”‚   â””â”€â”€ pdfGenerator.js
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ middleware/
â”‚   â”‚       â””â”€â”€ authMiddleware.js
â”‚   â”‚
â”‚   â”œâ”€â”€ .env                       âœ… CREATE THIS
â”‚   â”œâ”€â”€ .env.example              âœ… NEW
â”‚   â””â”€â”€ package.json              âœ… UPDATED
â”‚
â”œâ”€â”€ frontend/
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ pages/admin/
â”‚       â”‚   â””â”€â”€ OrderManagement.jsx  âœ… UPDATED
â”‚       â”‚
â”‚       â””â”€â”€ config/
â”‚           â””â”€â”€ api.js               âœ… UPDATED
â”‚
â”œâ”€â”€ QR_WORKFLOW_DOCUMENTATION.md     âœ… NEW
â”œâ”€â”€ QUICK_SETUP.md                   âœ… NEW
â”œâ”€â”€ IMPLEMENTATION_SUMMARY.md        âœ… NEW
â””â”€â”€ VISUAL_FLOW.md                   âœ… THIS FILE
```

---

This visual guide helps understand the complete flow of the system!
Reference the other documentation files for detailed implementation steps.
